<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>اختبار الباورسيستم</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <style>
        body {
            height: 100vh;
            margin: 0;
            background-image: url(https://wallpaperaccess.com/full/2384075.jpg);
            background-size: cover;
            background-position: center;
            direction: rtl;
            /* font-family: "Trirong", serif; */
            color: #222;
            font-family: "Courier New", monospace;
        }

        .n {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            margin: 50px auto;
        }

        h5 {
            font-size: 1.6rem;
            font-weight: bold;
            color: #333;
        }

        .progress {
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            background-color: #e0e0e0;
        }

        .progress-bar {
            background-color: #007bff;
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
        }

        .option-box {
            border: 2px solid #ddd;
            padding: 12px;
            margin-bottom: 10px;
            width: 100%;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
            /* text-align: right; */
            border-radius: 8px;
            transition: background 0.3s ease;
            background-color: #f9f9f9;
        }

        .option-box:hover {
            background-color: #f1f1f1;
        }

        .correct {
            background-color: #28a745 !important;
            color: white;
        }

        .incorrect {
            background-color: #dc3545 !important;
            color: white;
        }

        #score-container {
            font-size: 1.2rem;
            font-weight: bold;
            color: #444;
        }

        #end-of-page {
            margin-top: 40px;
            text-align: center;
            font-size: 0.95rem;
            color: #555;
        }

        #end-of-page a {
            color: #007bff;
            text-decoration: none;
        }

        #end-of-page a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .n {
                padding: 20px;
                margin: 20px auto;
            }

            h5 {
                font-size: 1.3rem;
            }

            .option-box {
                font-size: 0.95rem;
            }
        }
    </style>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Trirong">
</head>

<body>
    <div class="container n mt-5">
        <h5 class="text-center">اختبار البصمجة :) Power System Control </h5>
        <div class="progress mt-4">
            <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0"
                aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div id="score-container" class="text-center mt-4"></div>
        <hr />
        <hr />
        <div id="quiz-container" class="mt-4">
            <!-- Questions will be inserted here by JavaScript -->
        </div>
        <hr />
        <div id="end-of-page" class="mt-4">
            <p>تم التطوير بواسطة محمد عبد الفتاح</p>
            <p><a href="https://github.com/Mohamed6061">Github</a></p>
            <p>
                <a href="https://www.linkedin.com/in/mohamed-abdel-fatah-0369b6221">linkedin</a>
            </p>
        </div>
    </div>

    <audio id="correct-sound" src="correct.mp3"></audio>
    <audio id="incorrect-sound" src="./g.mp3"></audio>

    <script>
        const questions = [
            {
                question: "Fast-acting control strategy is used for local control in generation stations.",
                options: ["Primary control", "Secondary control", "Tertiary control", "None of these"],
                answer: 0 // a) Primary control
            },
            {
                question: "Voltage amplitude oscillations with a frequency range of 0-30 Hz is defined as.",
                options: ["Voltage harmonics", "Voltage fluctuations", "Voltage Noise", "None of these"],
                answer: 1 // b) Voltage fluctuations
            },
            {
                question: "The magnitude of EMF generated by an alternator depends on:",
                options: ["Rotor speed", "Flux per pole", "Number of poles", "All of these"],
                answer: 3 // d) All of these
            },
            {
                question: "A 10 pole AC generator rotates at 1200 rpm. The frequency of AC voltage will be:",
                options: ["120", "60", "100", "160"],
                answer: 2 // c) 100
            },
            {
                question: "The power injection from a synchronous generator to the grid is mainly dependent on:",
                options: ["phase voltage Vφ", "internal voltage EA", "torque angle δ", "All of these"],
                answer: 2 // c) torque angle δ
            },
            {
                question: "An alternator is said to be over-excited when it is operating at ........ power factor",
                options: ["leading", "lagging", "unity", "zero"],
                answer: 0 // a) leading
            },
            {
                question: "The reactive power injection (or terminal voltage) of a synchronous generator is dependent on ……",
                options: ["armature current IA", "field current If", "torque angle δ", "All of these"],
                answer: 1 // b) field current If
            },
            {
                question: "We can measure armature resistance by using ……",
                options: ["DC test", "open circuit test", "short circuit test", "None of these"],
                answer: 0 // a) DC test
            },
            {
                question: "The curve OCC of synchronous generator is between …..",
                options: ["VT and IA", "VT and EA", "EA and IA", "None of these"],
                answer: 3 // a) None of these
            },
            {
                question: "For adding leading loads alternator, the terminal voltage will…..",
                options: ["increase", "decrease", "not affected", "None of these"],
                answer: 0 // a) increase
            },
            {
                question: "The first central generating station was invented in the USA, and it used …… generator",
                options: ["10000 hp AC", "60 kW DC", "60 kW AC", "10000 hp DC"],
                answer: 1 // b) 60 kW DC
            },
            {
                question: "To increase the load with same power factor, the power angle will…..",
                options: ["increase", "decrease", "not affected", "None of these"],
                answer: 0 // a) increase
            },
            {
                question: "What is the voltage regulation of an alternator having a load with 0.75 leading pf, if the no load emf is 2400 V and the rated terminal voltage is 3000 V?",
                options: ["30", "-30", "20", "-20"],
                answer: 3 // d) -20
            },

            // page 2
            {
                question: "Which of the following conditions does not have to be met by alternators working in parallel?",
                options: [
                    "Alternators must operate at the same frequency",
                    "Machines must have the same phase rotation",
                    "The machines must have equal kVA ratings",
                    "The terminal voltage of each machine must be the same"
                ],
                answer: 2 // c) The machines must have equal kVA ratings
            },
            {
                question: "An induced torque will be opposite the direction of motion, if the generator were turning at a speed …… synchronous speed when it was paralleled with the power system.",
                options: ["Lower than", "higher than", "equal", "None of these"],
                answer: 1 // b) higher than
            },
            {
                question: "The ratio of the field current required for the rated voltage at open circuit to the field current required for the rated armature current at short circuit is defined as ……",
                options: ["short circuit ratio", "load sharing ratio", "transient ratio", "None of these"],
                answer: 0 // a) short circuit ratio
            },
            {
                question: "In practice, the maximum load that can be supplied by a generator is limited by its……. ",
                options: ["rating limit", "static stability limit", "dynamic stability limit", "None of these"],
                answer: 2 // c) dynamic stability limit
            },
            {
                question: "The average rms current during the transient period is often as much as …… the steady-state fault current.",
                options: ["ten times", "five times", "1/5 of", "None of these"],
                answer: 1 // b) five times
            },
            {
                question: "If the AC subtransient current component after a short circuit fault is 1000 A, then the total post-fault current (AC+DC) is expected to be ……",
                options: ["1000", "5000", "1500", "Can not be expected"],
                answer: 2 // c) 1500
            },
            {
                question: "For very abrupt changes in torque or load, the dynamic stability limit may be ….. the static stability limit",
                options: ["less than half", "More than twice", "equal to", "None of these"],
                answer: 0 // a) less than half
            },
            {
                question: "What type of current is present in a synchronous generator directly after a short circuit fault occurrence?",
                options: ["DC", "AC", "Both", "None"],
                answer: 2 // c) Both
            },
            {
                question: "The maximum allowable voltage of a synchronous generator is defined by ……",
                options: ["maximum speed", "maximum frequency", "insulation class", "None of these"],
                answer: 2 // c) insulation class
            },
            {
                question: "What is the fundamental electrical characteristic that explains the presence of DC currents after a fault?",
                options: ["Resistance", "Capacitance", "Inductance", "Conductance"],
                answer: 2 // c) Inductance
            },
            {
                question: "A restriction on a minimum acceptable power factor of a synchronous generator presents due to the limitation of ……",
                options: ["minimum If", "maximum If", "minimum EA", "maximum IA"],
                answer: 1 // b) maximum If
            },
            // page 3
            {
                question: "……current can often be 10 times the steady state fault current.",
                options: ["Transient", "Sub transient", "Rated", "Steady state fault"],
                answer: 1 // b) Sub transient
            },
            {
                question: "The maximum efficiency of a synchronous generator can be obtained at …… power factor",
                options: ["unity", "zero", "lagging", "leading"],
                answer: 0 // a) unity
            },
            {
                question: "If a 60-Hz generator is to be operated at 50 Hz, then the operating voltage must be derated to ….. of its original value",
                options: ["17.7%", "120.3%", "83.3%", "80.7%"],
                answer: 2 // c) 83.3%
            },
            {
                question: "Which factor that determines the power limits of electric machines?",
                options: [
                    "The mechanical torque on the shaft",
                    "The heating of the machine's windings",
                    "Both of these",
                    "None of these"
                ],
                answer: 2 // c) Both of these
            },
            {
                question: "If the rated voltage is known, then the maximum acceptable …. determines the rated KVA of the generator",
                options: ["power factor", "reactance", "field current", "armature current"],
                answer: 3 // d) armature current
            },
            {
                question: "For a synchronous generator, the direct-axis (d-axis) current component is in the same direction of …..",
                options: ["flux", "power", "voltage", "None of these"],
                answer: 0 // a) flux
            },
            {
                question: "The coordinate transformation in synchronous generators from three-phase components to dq-components is based on ………..",
                options: ["rotor position", "rotor speed", "stator frequency", "None of these"],
                answer: 0 // a) rotor position
            },
            {
                question: "What graphical tool expresses the stator and rotor heat limits of a synchronous generator?",
                options: ["Phasor diagram", "Capability diagram", "Vector diagram", "V-curve"],
                answer: 1 // b) Capability diagram
            },
            {
                question: "It was an old rule of thumb that for each 10°C temperature rise above the rated windings temperature, the average lifetime is",
                options: ["cut to half", "cut to quarter", "cut to one third", "remains the same"],
                answer: 0 // a) cut to half
            },
            {
                question: "In Capability curve appears …. On the vertical axis and ….. on the horizontal axis",
                options: ["S & P", "S & Q", "P & Q", "Q & P"],
                answer: 3 // d) Q & P
            },
            {
                question: "The length corresponding to EA on the power diagram (DE) is …..",
                options: [
                    "3EA Vφ / XS",
                    "−3EA Vφ / XS",
                    "3√2 EA Vφ / XS",
                    "−3√2 EA Vφ / XS"
                ],
                answer: 1 // b) −3EA Vφ / XS
            },
            {
                question: "A typical synchronous generator can often supply what percentage of its rated power for a short time?",
                options: ["100%", "200%", "300%", "400%"],
                answer: 2 // c) 300%
            },
            // page 3
            {
                question: "In the phasor diagram of a synchronous generator, the stator current is perpendicular to ….. if the stator resistance is neglected.",
                options: ["internal generated voltage", "internal voltage drop. ", "phase voltage", " None of these "], // The options are not visible in the image
                answer: 1 // Unknown due to cropped content
            }, {
                question: "………… is a device that control prime move mechanical power by adjusting fuel amount.",
                options: ["AVR", "Governor", "SVC", "None of these"],
                answer: 1 // b) Governor
            },
            {
                question: "The relationship between frequency and power is",
                options: [
                    "P = Sp(fn1 − fnSys)",
                    "P = Sp(fnSys − fn)",
                    "P = (fn1 − fnSys)",
                    "None of these"
                ],
                answer: 0 // a) P = Sp(fn1 − fnSys)
            },
            {
                question: "When active power 'P' supplied by alternator increases, Alternator frequency will ……..",
                options: ["increases", "decrease", "remain constant", "None of them"],
                answer: 1 // b) decrease
            },
            {
                question: "It is a device that controls terminal voltage of a standalone synchronous generator …….",
                options: ["AVR", "SVC", "Governor", "AGC"],
                answer: 0 // a) AVR
            },
            {
                question: "If terminal voltage is less than the rated value, AVR will …………… field current and so restore terminal voltage to its rated value.",
                options: ["increase", "decrease", "remain constant", "None of them"],
                answer: 0 // a) increase
            },
            {
                question: "Find the efficiency of a 480-V generator with Rₐ = 0.015 supplies 1200 A at 0.8 PF lagging, the friction and windage losses are 40 kW, and the core losses are 30 kW.",
                options: ["85 %", "90%", "92%", "80%"],
                answer: 1 // b) 90%
            },
            {
                question: "The most important synchronization condition for synchronous generators is ……..",
                options: ["equal RMS value", "equal phase shift", "equal phase sequence", "All are the same"],
                answer: 2 // c) equal phase sequence
            },
            {
                question: "Which type of governor is commonly used in modern alternator systems",
                options: ["Mechanical governor", "Hydraulic governor", "Electronic governor", "Pneumatic governor"],
                answer: 2 // c) Electronic governor
            },
            {
                question: "The transient stability of a synchronous generator is usually analyzed and studied by using ……..",
                options: ["the phasor diagram", "capability curves", "swing equation", "None of these"],
                answer: 2 // c) swing equation
            },
            {
                question: "The subtransient synchronous reactance can be defined as the ratio between ………..",
                options: ["Vφ/I''", "EA/I''", "Vφ/I'", "EA/I'"],
                answer: 1 // b) EA/I''
            },
            {
                question: "For a parallel operation of two synchronous generators, increasing the governor set point of one generator will ……………",
                options: [
                    "increase frequency",
                    "decrease frequency",
                    "increase voltage",
                    "None of these"
                ],
                answer: 0 // a) increase frequency
            },
            {
                question: "For short transmission lines the line loadability limit is determined by ……..",
                options: ["voltage drop", "static stability limit", "thermal limits", "All of these"],
                answer: 2 // c) thermal limits
            },
            // page 5
            {
                question: "For long transmission lines the line loadability limit is determined by …….",
                options: ["voltage drop", "static stability limit", "thermal limits", "All of these"],
                answer: 0 // a) voltage drop
            },
            {
                question: "The governor set points of the generator control …………… supplied by the generator to the system.",
                options: ["the real power", "the reactive power", "the apparent power", "All of the above"],
                answer: 0 // a) the real power
            },
            {
                question: "The field current in the generator controls ………………… supplied by the generator to the system",
                options: ["the real power", "the reactive power", "the apparent power", "All of the above"],
                answer: 1 // b) the reactive power
            },
            {
                question: "When a single generator operated alone, the real and reactive powers (P and Q) supplied by the generator were ……",
                options: ["fully controlled", "load-constrained", "voltage-dependent", "frequency-dependent"],
                answer: 1 // b) load-constrained
            },
            {
                question: "The frequency and terminal voltage were ………..by the governor set points and the field current.",
                options: [
                    "(P & Q ) fixed",
                    "(P & Q ) varied",
                    "(P) fixed and (Q) varied",
                    "(Q) fixed and (P) varied"
                ],
                answer: 1 // b) (P & Q ) varied
            },
            {
                question: "When a generator operated in parallel with an infinite bus, the frequency and terminal voltage were…………",
                options: ["fully controlled", "fully constrained", "power-dependent", "None of these"],
                answer: 1 // b) fully constrained
            },
            {
                question: "When a generator is operating alone without changing the load, and the governor set point is increased, what happens?",
                options: [
                    "frequency increase",
                    "Voltage increases",
                    "Active power of generator increases",
                    "All of the above"
                ],
                answer: 0 // a) frequency increase
            },
            {
                question: "……… is a torsional oscillation damping scheme used by TCSC devices",
                options: ["modulation control", "Voltage reversal control", "Both b and c", "None of these"],
                answer: 2 // c) Both b and c
            },
            {
                question: "For a generator operating alone, if the reactive power of load increases without changing field current, what occurs?",
                options: [
                    "Terminal voltage drop",
                    "Reactive power of generator decreases",
                    "Frequency decreases",
                    "Both A and B"
                ],
                answer: 0 // a) Terminal voltage drop
            },
            {
                question: "In two parallel operations of synchronous generators, if the governor set point of a SG1 is increased, while the governor set point of SG2 is decreased by the same ratio ……",
                options: [
                    "the power sharing change",
                    "the frequency increases",
                    "the voltage increases",
                    "the frequency decreases"
                ],
                answer: 0 // a) the power sharing change
            },
            // page 6
            {
                question: "The operating frequency tolerance for a reliable power system should be within:",
                options: ["±1%", "±3%", "±5%", "±10%"],
                answer: 1 // b) ±3%
            },
            {
                question: "The end-user voltage tolerance for a reliable power system should be within:",
                options: ["-5% to +5%", "-10% to +5%", "-15% to +10%", "-20% to +15%"],
                answer: 1 // b) -10% to +5%
            },
            {
                question: "A power failure lasting less than 2 seconds is called:",
                options: ["Long interrupt", "Short interrupt", "Voltage sag", "Overvoltage"],
                answer: 1 // b) Short interrupt
            },
            {
                question: "An isochronous governor works satisfactorily when:",
                options: ["Generator is parallel with infinite bus", "Generator is operating independently", "Generator is overloaded", "Generator is in standby mode"],
                answer: 0 // a) Generator is parallel with infinite bus
            },
            {
                question: "The voltage regulation of a lossless transmission line is:",
                options: ["Maximum", "Minimum", "Zero", "Undefined"],
                answer: 2 // c) Zero
            },
            {
                question: "A 5% droop in speed-load characteristic means:",
                options: ["5% speed change causes 50% power change", "5% speed change causes 100% power change", "5% speed change has no effect", "10% speed change causes 100% power change"],
                answer: 1 // b) 5% speed change causes 100% power change
            },
            {
                question: "The composite frequency response characteristic β is expressed in:",
                options: ["Hz/Ω", "MW/Hz", "kW/s", "Ω/s"],
                answer: 1 // b) MW/Hz
            },


            {
                question: "The fastest response to power changes comes from:",
                options: [" steam with reheat ", "hydraulic", "steam without reheat ", "none of them "],
                answer: 2 // c) Hydraulic turbine
            },
            {
                question: "The control level of automatic generation control (AGC) is considered:",
                options: ["Primary control", "Secondary control", "Tertiary control", "Voltage control"],
                answer: 1 // b) Secondary control
            },
            {
                question: "In isolated power systems, the main function of AGC is:",
                options: ["Maintain voltage stability", "Restore frequency to the specified nominal value", "Synchronize multiple generators", "Prevent overloads"],
                answer: 1 // b) Restore frequency to the specified nominal value
            },
            {
                question: "What type of control action does AGC use to adjust the load reference settings of governors?",
                options: ["Primary control", "Secondary control", "Integral control", "Differential control"],
                answer: 2 // c) Integral control
            },
            {
                question: "Who is responsible for addressing the interaction between voltage control and active power control?",
                options: ["AGC", "Governor", "SVC", "PSS"],
                answer: 3 //  PSS
            },
            //last two pages
            {
                question: "Convert the power from a separate AC source into a DC controlled power for the field winding of synchronous generators.",
                options: ["DC exciter", "AC exciter", "Static exciter", "None of these"],
                answer: 2 // c) Static exciter
            },
            {
                question: "Core Functions of Transmission Lines are:",
                options: ["Bulk Power Transfer and Loss Minimization", "Grid Stability and Synchronization", "Reliability and Redundancy", "All of these"],
                answer: 3 // d) All of these
            },
            {
                question: "The ABCD constants of a 3-phase transmission line are A = D = 0.82∠0°, B = 170∠85° Ω, C = 0.002∠90.4°. The sending end voltage is 400 kV. The receiving end voltage under no load condition is:",
                options: ["400 kV", "500 kV", "600 kV", "350 kV"],
                answer: 1 // b) 500 kV
            },
            {
                question: "Which of the following follows the property of the transmission line?",
                options: ["AD − BC = 1", "A = D", "Both a and b", "None of these"],
                answer: 2 // c) Both a and b
            },
            {
                question: "For a medium T-type transmission line, the parameter A is equal to:",
                options: ["1", "Z", "(1 + ZY/4)", "(1 + ZY/2)"],
                answer: 3 // d) (1 + ZY/2)
            },
            {
                question: "The real power flow along a lossless line is ______ from the sending end to the receiving end, and the reactive power flow is ______.",
                options: ["constant & zero", "zero & constant", "variable & zero", "zero & variable"],
                answer: 0 // a) constant & zero
            },
            {
                question: "What is the value of characteristics impedance for loss-free transmission line?",
                options: ["√(L/C)", "√(R/C)", "√(L/C)", "D/C"],
                answer: 0 // a) √(L/C)
            },
            {
                question: "Find the surge impedance of a line when inductance is 160 mH and capacitance is 1 μF.",
                options: ["200 Ω", "400 Ω", "160", "800 Ω"],
                answer: 1 // b) 400 Ω
            },
            {
                question: "For a 400 kV transmission line, the surge impedance is 400 Ω. The SIL is:",
                options: ["200 MW", "400 MW", "1600 MW", "500 MW"],
                answer: 1 // b) 400 MW
            },
            {
                question: "In short transmission lines, the effects of ______ are neglected.",
                options: ["Resistance", "Capacitance", "Inductance", "Conductance"],
                answer: 1 // b) Capacitance
            },
            {
                question: "The maximum power that the line can deliver, which occurs when the angle between the receiving and sending end voltages is:",
                options: ["30°", "60°", "45°", "90°"],
                answer: 3 // d) 90°
            },
            {
                question: "A transmission line is considered as a medium line if its length is in the range of:",
                options: ["50 < L < 150 km", "20 < L < 50 km", "150 < L < 250 km", "None of these"],
                answer: 0 // a) 50 < L < 150 km
            },
            {
                question: "The theoretical maximum real power delivered (or steady-state stability limit) by a transmission line occurs when:",
                options: ["δ = 90°", "θ2 = δ", "θA = 0", "All of these"],
                answer: 3 // d) All of these
            },
            {
                question: "Range of surge impedance for an overhead transmission line is:",
                options: ["120 - 144 Ω", "40 - 60 Ω", "400 - 600 Ω", "300 - 900 Ω"],
                answer: 2 // c) 400 - 600 Ω
            },
            {
                question: "Use multiple small-scale FACTS devices at different nodes and lines of the power system, and they are dynamically controlled together to achieve high performance.",
                options: ["D-FACTS", "SVC", "IPFC", "UPFC"],
                answer: 0 // a) D-FACTS
            },
            {
                question: "If a susceptance of a static VAR compensator (SVC) is set to (Xlim/2), then the line capability will be ______ the base capability of the line (P0).",
                options: ["equal to", "twice", "half", "None of these"],
                answer: 1 // b) twice
            },
            {
                question: "A shunt-connected device, which represents a thyristor-switched admittance in order to compensate for the transmission line reactive power is called:",
                options: ["TCSC", "STATCOM", "SVC", "SSC"],
                answer: 2 // c) SVC
            },
            {
                question: "A modified version of SVC, because it has the same principles and function but replaces the switching thyristors with a voltage source inverter, is called:",
                options: ["TCSC", "STATCOM", "UPFC", "SSC"],
                answer: 1 // b) STATCOM
            },
            {
                question: "A small rise in the voltage waveforms out of tolerance between one and few cycles is one of the power quality problems called:",
                options: ["Voltage Sag", "Voltage Spikes", "Voltage Swell", "Voltage Noise"],
                answer: 2 // c) Voltage Swell
            }


        ];


        function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    let currentQuestionIndex = 0;
    let score = 0;

    function showQuestion(index) {
        const quizContainer = document.getElementById("quiz-container");
        quizContainer.innerHTML = `
            <div class="question-container l active">
            <h6 style="text-align:right">رقم السؤال ${index + 1} من ${questions.length}</h6>
            <h5 style="color: blue; font-weight: 600; direction: ltr;">${questions[index].question}</h5>
            <div id="options-container" style="color:black" class="d-flex flex-wrap"></div>
            </div>
        `;

        const optionsContainer = document.getElementById("options-container");
        questions[index].options.forEach((option, i) => {
            optionsContainer.innerHTML += `
                <h6 class="option-box" onclick="checkAnswer(${i})">${option}</h6> `;
        });
    }

    function checkAnswer(selectedIndex) {
        const answer = questions[currentQuestionIndex].answer;

        questions[currentQuestionIndex].selectedIndex = selectedIndex;

        if (selectedIndex === answer) {
            score++;
            document
                .querySelectorAll(".option-box")
            [answer].classList.add("correct");
            document.getElementById("correct-sound").play();
        } else {
            document
                .querySelectorAll(".option-box")
            [selectedIndex].classList.add("incorrect");
            document
                .querySelectorAll(".option-box")
            [answer].classList.add("correct");
            document.getElementById("incorrect-sound").play();
        }

        setTimeout(() => {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion(currentQuestionIndex);
                updateProgressBar();
            } else {
                showScore();
                showSolutions();
            }
        }, 1000);
    }

    function showScore() {
        const quizContainer = document.getElementById("quiz-container");
        const scoreContainer = document.getElementById("score-container");
        quizContainer.innerHTML = "";
        scoreContainer.innerHTML = `<h3>Your result ${score} from ${questions.length}</h3>`;
    }

    function showSolutions() {
        const quizContainer = document.getElementById("quiz-container");
        const solutionsContainer = document.createElement("div");
        solutionsContainer.classList.add("question-solution-container");
        quizContainer.appendChild(solutionsContainer);

        questions.forEach((question, index) => {
            const solutionDiv = document.createElement("div");
            solutionDiv.innerHTML = `
                <h6 style="color: red">${index + 1}. ${question.question}</h6>
                ${question.selectedIndex !== undefined ? `<p><strong>Your Choice:</strong> ${question.options[question.selectedIndex]}</p>` : ''}
                <p><strong>Correct Answer:</strong> ${question.options[question.answer]}</p>
                `;
            solutionsContainer.appendChild(solutionDiv);
        });
    }

    function updateProgressBar() {
        const progressBar = document.getElementById("progress-bar");
        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        progressBar.style.width = `${progress}%`;
        progressBar.setAttribute("aria-valuenow", progress);
    }

    document.addEventListener("DOMContentLoaded", () => {
        shuffle(questions); // Shuffle the questions array
        showQuestion(currentQuestionIndex);
        updateProgressBar();
    });
    </script>
</body>

</html>
